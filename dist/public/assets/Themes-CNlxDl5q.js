import{r as t,s as X,t as Z,z as ee,u as ae,j as e,C as k,b as F,L as l,B as P,I as x,A as q,T as E,h as A,w as I}from"./index-BbEI6kfN.js";import{u as B}from"./useMutation-DsKdg1CA.js";import{S as H,a as se,b as te,c as re,d as s}from"./select-BAND5kKC.js";import"./index-DKhwRz1D.js";function ue(){const[D,p]=t.useState("default"),[L,Q]=t.useState("none"),[ne,$]=t.useState([]),[le,K]=t.useState({fps:60,memory:0,loadTime:0});t.useEffect(()=>{$([{name:"default",usage:45,avgDuration:120},{name:"christmas",usage:15,avgDuration:60},{name:"halloween",usage:20,avgDuration:90},{name:"custom",usage:20,avgDuration:180}]);const r=setInterval(()=>{var o;K({fps:Math.round(performance.now()/1e3),memory:((o=performance.memory)==null?void 0:o.usedJSHeapSize)||0,loadTime:performance.timing.loadEventEnd-performance.timing.navigationStart})},1e3);return()=>clearInterval(r)},[]);const[i,v]=t.useState("#D4AF37"),[d,j]=t.useState("#2A2A2A"),[m,f]=t.useState("#D4AF37"),[u,y]=t.useState("#121212"),[h,b]=t.useState("#FFFFFF"),[g,z]=t.useState(null),[U,V]=t.useState(null),C=X(),{toast:c}=Z(),{theme:G,updateTheme:N}=ee(),{data:n,isLoading:oe}=ae({queryKey:["/api/admin/theme-settings"],queryFn:async()=>(await A("GET","/api/admin/theme-settings")).json()}),T=B({mutationFn:async a=>(await A("POST","/api/admin/theme-settings",a)).json(),onSuccess:(a,r)=>{c({title:"Theme Updated",description:"The site theme has been updated successfully",variant:"default"}),I("Update Theme",`Changed theme to: ${r.theme}`),C.invalidateQueries({queryKey:["/api/admin/theme-settings"]}),r.theme!=="custom"&&N(E[r.theme])},onError:a=>{c({title:"Theme Update Failed",description:`Failed to update theme: ${a}`,variant:"destructive"})}}),S=B({mutationFn:async a=>(await A("POST","/api/admin/theme-settings/custom",a)).json(),onSuccess:()=>{c({title:"Custom Theme Saved",description:"Your custom theme has been saved and applied",variant:"default"}),I("Save Custom Theme","Created and applied a custom theme"),C.invalidateQueries({queryKey:["/api/admin/theme-settings"]});const a=q({colors:{primary:i,secondary:d,accent:m,background:u,text:h}});N(a),p("custom")},onError:a=>{c({title:"Custom Theme Save Failed",description:`Failed to save custom theme: ${a}`,variant:"destructive"})}}),w=B({mutationFn:async a=>{const r=new FormData;r.append("backgroundImage",a);const o=await fetch("/api/admin/theme-settings/background",{method:"POST",body:r,credentials:"include"});if(!o.ok){const W=await o.text();throw new Error(W||o.statusText)}return o.json()},onSuccess:a=>{c({title:"Background Uploaded",description:"The background image has been uploaded and applied",variant:"default"}),I("Upload Background","Updated site background image"),z(null),C.invalidateQueries({queryKey:["/api/admin/theme-settings"]}),N({...G,backgroundImage:a.backgroundUrl})},onError:a=>{c({title:"Upload Failed",description:`Failed to upload background image: ${a}`,variant:"destructive"})}});t.useEffect(()=>{n&&(p(n.currentTheme||"default"),n.customTheme&&(v(n.customTheme.primaryColor||"#D4AF37"),j(n.customTheme.secondaryColor||"#2A2A2A"),f(n.customTheme.accentColor||"#D4AF37"),y(n.customTheme.backgroundColor||"#121212"),b(n.customTheme.textColor||"#FFFFFF")))},[n]);const O=()=>{T.mutate({theme:D})},R=()=>{S.mutate({primaryColor:i,secondaryColor:d,accentColor:m,backgroundColor:u,textColor:h})},Y=a=>{a.target.files&&a.target.files[0]&&z(a.target.files[0])},J=()=>{g&&w.mutate(g)},M=a=>{if(V(a),a==="custom"){const r=q({colors:{primary:i,secondary:d,accent:m,background:u,text:h}});console.log("Previewing custom theme:",r)}else a in E&&console.log("Previewing theme:",E[a])},_=a=>{console.log("Previewing particle effect:",a)};return e.jsxs("div",{className:"space-y-6 animate-fadeIn",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-primary",children:"Theme Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsx(k,{className:"glass",children:e.jsxs(F,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Active Theme"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"themeSelect",className:"text-gray-300",children:"Select Theme"}),e.jsxs(H,{value:D,onValueChange:a=>{p(a),M(a)},children:[e.jsx(se,{id:"themeSelect",className:"bg-zinc-900 border-primary/30 text-white focus:border-primary",children:e.jsx(te,{placeholder:"Select Theme"})}),e.jsxs(re,{className:"bg-zinc-900 border-primary/30",children:[e.jsx(s,{value:"default",children:"Default (Black & Gold)"}),e.jsx(s,{value:"christmas",children:"Christmas"}),e.jsx(s,{value:"halloween",children:"Halloween"}),e.jsx(s,{value:"valentines",children:"Valentine's Day"}),e.jsx(s,{value:"newyear",children:"New Year"}),e.jsx(s,{value:"stpatrick",children:"St. Patrick's Day"}),e.jsx(s,{value:"easter",children:"Easter"}),e.jsx(s,{value:"custom",children:"Custom Theme"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(l,{htmlFor:"particleEffect",children:"Particle Effect"}),e.jsxs(H,{value:L,onValueChange:a=>{Q(a),_(a)},children:[e.jsx(s,{value:"none",children:"None"}),e.jsx(s,{value:"gold",children:"Gold"}),e.jsx(s,{value:"dust",children:"Dust"}),e.jsx(s,{value:"shimmer",children:"Shimmer"}),e.jsx(s,{value:"sparkle",children:"Sparkle"}),e.jsx(s,{value:"snow",children:"Snow"}),e.jsx(s,{value:"fireworks",children:"Fireworks"}),e.jsx(s,{value:"hearts",children:"Hearts"}),e.jsx(s,{value:"clovers",children:"Clovers"}),e.jsx(s,{value:"eggs",children:"Easter Eggs"}),e.jsx(s,{value:"bats",children:"Bats"})]})]})]}),e.jsx("div",{children:e.jsx(P,{onClick:O,className:"gold-gradient text-black font-bold hover:opacity-90",disabled:T.isPending,children:T.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-circle-notch fa-spin mr-2"}),"Applying..."]}):"Apply Theme"})})]})]})}),e.jsx(k,{className:"glass",children:e.jsxs(F,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Theme Preview"}),e.jsx("div",{className:"aspect-video bg-zinc-900 rounded-lg flex items-center justify-center overflow-hidden",children:U?e.jsx("div",{className:`w-full h-full flex items-center justify-center theme-${U}`,children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"p-4 glass-gold rounded-lg mb-2",children:[e.jsx("h4",{className:"text-primary font-bold",children:"Sample Header"}),e.jsx("p",{className:"text-sm",children:"This is how text will appear"})]}),e.jsx("button",{className:"gold-gradient text-black px-4 py-2 rounded-md font-bold",children:"Sample Button"})]})}):e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-paint-brush text-4xl text-primary mb-2"}),e.jsx("p",{className:"text-gray-400",children:"Select a theme to preview"})]})})]})})]}),e.jsx(k,{className:"glass",children:e.jsxs(F,{className:"pt-6",children:[e.jsx("h3",{className:"text-lg font-bold mb-4",children:"Custom Theme Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"primaryColor",className:"text-gray-300",children:"Primary Color"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"color",id:"primaryColor",value:i,onChange:a=>v(a.target.value),className:"w-12 h-10 rounded-l-md border-0"}),e.jsx(x,{value:i,onChange:a=>v(a.target.value),className:"bg-zinc-900 border-primary/30 text-white rounded-l-none focus:border-primary"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"accentColor",className:"text-gray-300",children:"Accent Color"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"color",id:"accentColor",value:m,onChange:a=>f(a.target.value),className:"w-12 h-10 rounded-l-md border-0"}),e.jsx(x,{value:m,onChange:a=>f(a.target.value),className:"bg-zinc-900 border-primary/30 text-white rounded-l-none focus:border-primary"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"textColor",className:"text-gray-300",children:"Text Color"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"color",id:"textColor",value:h,onChange:a=>b(a.target.value),className:"w-12 h-10 rounded-l-md border-0"}),e.jsx(x,{value:h,onChange:a=>b(a.target.value),className:"bg-zinc-900 border-primary/30 text-white rounded-l-none focus:border-primary"})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"secondaryColor",className:"text-gray-300",children:"Secondary Color"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"color",id:"secondaryColor",value:d,onChange:a=>j(a.target.value),className:"w-12 h-10 rounded-l-md border-0"}),e.jsx(x,{value:d,onChange:a=>j(a.target.value),className:"bg-zinc-900 border-primary/30 text-white rounded-l-none focus:border-primary"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{htmlFor:"backgroundColor",className:"text-gray-300",children:"Background Color"}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"color",id:"backgroundColor",value:u,onChange:a=>y(a.target.value),className:"w-12 h-10 rounded-l-md border-0"}),e.jsx(x,{value:u,onChange:a=>y(a.target.value),className:"bg-zinc-900 border-primary/30 text-white rounded-l-none focus:border-primary"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(l,{htmlFor:"backgroundImage",className:"text-gray-300",children:"Background Image"}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("input",{type:"file",id:"backgroundImage",className:"hidden",onChange:Y,accept:"image/*"}),e.jsx(l,{htmlFor:"backgroundImage",className:"px-4 py-2 rounded-md bg-zinc-800 text-primary border border-primary/30 cursor-pointer hover:bg-zinc-700 transition",children:"Choose File"}),e.jsx("span",{className:"ml-3 text-sm text-gray-400",children:g?g.name:"No file chosen"})]}),g&&e.jsx("div",{className:"mt-3",children:e.jsx(P,{onClick:J,className:"gold-gradient text-black font-bold hover:opacity-90",disabled:w.isPending,children:w.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-circle-notch fa-spin mr-2"}),"Uploading..."]}):"Upload Background"})})]}),e.jsx("div",{className:"md:col-span-2 mt-2",children:e.jsx(P,{onClick:()=>{M("custom"),R()},className:"gold-gradient text-black font-bold hover:opacity-90",disabled:S.isPending,children:S.isPending?e.jsxs("span",{className:"flex items-center",children:[e.jsx("i",{className:"fas fa-circle-notch fa-spin mr-2"}),"Saving..."]}):"Save Custom Theme"})})]})]})})]})}export{ue as default};
