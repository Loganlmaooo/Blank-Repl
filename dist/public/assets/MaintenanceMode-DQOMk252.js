import{r as c,t as M,s as g,z as p,u as j,j as e,C as f,d as S,e as k,b as C,I as b,B as y,h as m}from"./index-BbEI6kfN.js";import{S as v}from"./switch-C2cdH4g5.js";import{u as E}from"./useMutation-DsKdg1CA.js";import"./index-DKhwRz1D.js";function q(){const[a,r]=c.useState(!1),[n,i]=c.useState("Site is under maintenance. Please check back later."),{toast:l}=M(),o=g(),{theme:d,updateTheme:u}=p(),{data:s}=j({queryKey:["theme-settings"],queryFn:async()=>await m("GET","/api/admin/theme-settings")});c.useEffect(()=>{s&&(r(s.maintenanceMode||!1),i(s.maintenanceMessage||"Site is under maintenance. Please check back later."))},[s]);const h=E({mutationFn:async()=>await m("POST","/api/admin/theme-settings",{theme:d.name,maintenanceMode:a,maintenanceMessage:n||"Site is under maintenance. Please check back later."}),onSuccess:()=>{o.invalidateQueries({queryKey:["theme-settings"]}),u({...d,maintenanceMode:a,maintenanceMessage:n||"Site is under maintenance. Please check back later.",maintenanceMode:a,maintenanceMessage:n}),l({title:"Maintenance Mode Updated",description:a?"Site is now in maintenance mode":"Site is now live"})}}),x=()=>{h.mutate()};return e.jsxs(f,{children:[e.jsx(S,{children:e.jsx(k,{children:"Maintenance Mode"})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:"Enable Maintenance Mode"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Put the site in maintenance mode"})]}),e.jsx(v,{checked:a,onCheckedChange:t=>{r(t),i(n||"Site is under maintenance. Please check back later.")}})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-2",children:"Maintenance Message"}),e.jsx(b,{value:n,onChange:t=>i(t.target.value),placeholder:"Enter maintenance message"})]}),e.jsx(y,{onClick:x,className:"w-full",children:"Save Changes"})]})})]})}export{q as default};
